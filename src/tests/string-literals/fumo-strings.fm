// linking with libc
fn printf(format: i8*, ...) -> i32;

struct Fumo {
    let name: i8*;
    let squished: i32;
    
    fn squish(times: i32) -> void {
        squished = squished + times;
        printf("%sちゃんは%d回squished!\n", name, squished);
    }
}

fn pet_fumo(fumo: Fumo*, times: i32) -> void {
    printf("petting %s %d times...\n", fumo->name, times);
    fumo->squish(times);
}

let reimu = Fumo {"Reimu", 66};
let cirno = Fumo {"Cirno", 418};

fn main() -> i32 {
    printf("fumo lang example.\n");
    
    pet_fumo(&reimu, 3);
    pet_fumo(&cirno, 2);
    
    printf("\nfinal pat count:\n");
    printf("Reimu: %d pats\n", reimu.squished);
    printf("Cirno: %d pats\n", cirno.squished);
    
    return 0;
}
